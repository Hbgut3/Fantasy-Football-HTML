<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fantasy Points Week 8</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  .tab { cursor: pointer; padding: 10px 15px; background: #eee; display: inline-block; margin-right: 2px; border-radius: 5px 5px 0 0; transition: background 0.2s; }
  .tab:hover { background: #ddd; }
  .tab.active { background: #ccc; font-weight: bold; }
  #searchBar { margin-top: 10px; padding: 5px; width: 300px; }
  table { border-collapse: collapse; width: 100%; overflow-x: auto; display: block; margin-top: 10px; }
  th, td { border: 1px solid #333; padding: 5px; text-align: left; white-space: nowrap; }
  th { background: #f0f0f0; }
</style>
</head>
<body>

<h1>Fantasy Points Week 6</h1>

<div id="tabs"></div>
<input type="text" id="searchBar" placeholder="Search player by name..." onkeyup="filterTable()">
<div id="content"></div>

<script>
const teams = ["Hayden","Tanner","Pat","Riley","Trey","Ultron","Waivers"];
let currentTeam = teams[0]; // track current team
let currentData = []; // store current team's data for filtering

// Create tab buttons
const tabsDiv = document.getElementById("tabs");
teams.forEach(team => {
  const btn = document.createElement("div");
  btn.className = "tab";
  btn.textContent = team;
  btn.onclick = () => showTeam(team);
  tabsDiv.appendChild(btn);
});

// Custom position order
const positionOrder = ["QB","RB","WR","TE"];

// Show a team
async function showTeam(team) {
  currentTeam = team;
  
  // Remove active class from all tabs
  document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
  Array.from(tabsDiv.children).find(t => t.textContent === team).classList.add("active");

  // Load JSON
  const response = await fetch(team + ".json");
  let data = await response.json();
  currentData = data; // store for filtering

  renderTable(data);
}

// Render table function
function renderTable(data) {
  if (data.length === 0) {
    document.getElementById("content").innerHTML = "<p>No players found.</p>";
    return;
  }

  // Sort by position then Fantasy Points
  data.sort((a,b) => {
    const posA = positionOrder.indexOf(a["Position"]);
    const posB = positionOrder.indexOf(b["Position"]);
    const posOrderA = posA === -1 ? positionOrder.length : posA;
    const posOrderB = posB === -1 ? positionOrder.length : posB;
    if (posOrderA !== posOrderB) return posOrderA - posOrderB;
    return b["Fantasy Points"] - a["Fantasy Points"];
  });

  // Highlight top Fantasy Points
  const maxPoints = Math.max(...data.map(p => p["Fantasy Points"]));

  let html = "<table><tr>";
  for (let key of Object.keys(data[0])) html += `<th>${key}</th>`;
  html += "</tr>";

  data.forEach(row => {
    const isTop = row["Fantasy Points"] === maxPoints;
    html += `<tr${isTop ? ' style="background-color: #ffeb3b;"' : ''}>`;
    for (let key of Object.keys(row)) html += `<td>${row[key]}</td>`;
    html += "</tr>";
  });

  document.getElementById("content").innerHTML = html;
}

// Search/filter function
function filterTable() {
  const query = document.getElementById("searchBar").value.toLowerCase();
  const filtered = currentData.filter(player => player["Name"].toLowerCase().includes(query));
  renderTable(filtered);
}

// Show first team by default
showTeam(currentTeam);
</script>

</body>
</html>

